<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.13.xsd">

  <changeSet id="1" author="European Dynamics SA">
    <ext:createCollection collectionName="Setting"/>

    <ext:createIndex collectionName="Setting">
      <ext:keys>{name: 1}</ext:keys>
      <ext:options>{name: "settingNameIdx", unique: true}</ext:options>
    </ext:createIndex>

    <ext:insertMany collectionName="Setting">
      <ext:documents>
        [{"name":"SECURITY_ASYMMETRIC_KEY_SIZE", "value": "2048"},
        {"name":"SECURITY_ASYMMETRIC_KEY_ALGORITHM", "value": "RSA"},
        {"name":"SECURITY_ASYMMETRIC_SIGNATURE_ALGORITHM", "value": "SHA256WITHRSA"}]
      </ext:documents>
    </ext:insertMany>
  </changeSet>

  <changeSet id="2" author="European Dynamics SA">
    <ext:insertOne collectionName="Setting">
      <ext:document>
        {"name":"DEVICE_REGISTRATION_MODE", "value": "DISABLED"}
      </ext:document>
    </ext:insertOne>
  </changeSet>

  <changeSet id="3" author="European Dynamics SA">
    <ext:insertOne collectionName="Setting">
      <ext:document>
        {"name":"KAFKA_CONTROL_REQUEST_TOPIC_NAME", "value": "esthesis-control-request"}
      </ext:document>
    </ext:insertOne>
  </changeSet>

</databaseChangeLog>
