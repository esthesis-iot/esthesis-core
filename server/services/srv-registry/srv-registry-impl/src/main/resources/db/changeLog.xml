<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
  xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
  xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.13.xsd">

  <changeSet id="1" author="European Dynamics SA">
    <ext:createCollection collectionName="Registry"/>

    <ext:createIndex collectionName="Registry">
      <ext:keys>{name: 1}</ext:keys>
      <ext:options>{name: "registryNameIdx", unique: true}</ext:options>
    </ext:createIndex>

    <ext:insertMany collectionName="Registry">
      <ext:documents>
        [{"name":"securityAsymmetricKeySize", "value": "2048"},
        {"name":"securityAsymmetricKeyAlgorithm", "value": "RSA"},
        {"name":"securityAsymmetricSignatureAlgorithm", "value": "SHA256WITHRSA"}]
      </ext:documents>
    </ext:insertMany>
  </changeSet>

  <changeSet id="2" author="European Dynamics SA">
    <ext:insertOne collectionName="Registry">
      <ext:document>
        {"name":"deviceRegistrationMode", "value": "DISABLED"}
      </ext:document>
    </ext:insertOne>
  </changeSet>

</databaseChangeLog>
